$OpenBSD: patch-src_validator_c,v 1.3 2020/06/19 08:18:08 ajacoutot Exp $

https://gitlab.freedesktop.org/xdg/desktop-file-utils/-/merge_requests/8

Index: src/validator.c
--- src/validator.c.orig
+++ src/validator.c
@@ -28,6 +28,9 @@
 
 #include <locale.h>
 
+#ifdef HAVE_PLEDGE
+#include <unistd.h>
+#endif
 #include "validate.h"
 
 static gboolean   warn_kde = FALSE;
@@ -50,6 +53,13 @@ main (int argc, char *argv[])
   GError         *error;
   int i;
   gboolean all_valid;
+
+#ifdef HAVE_PLEDGE
+  if (pledge ("stdio rpath", NULL) == -1) {
+    g_printerr ("pledge\n");
+    return 1;
+  }
+#endif
 
   setlocale (LC_ALL, "");
 
