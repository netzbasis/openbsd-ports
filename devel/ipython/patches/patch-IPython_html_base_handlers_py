$OpenBSD: patch-IPython_html_base_handlers_py,v 1.1 2015/06/25 10:51:31 jasper Exp $

Security fix for CVE-2015-4707
https://github.com/ipython/ipython/commit/c2078a53543ed502efd968649fee1125e0eb549c

--- IPython/html/base/handlers.py.orig	Wed Jun 24 16:41:55 2015
+++ IPython/html/base/handlers.py	Wed Jun 24 16:42:45 2015
@@ -339,6 +339,7 @@ def json_errors(method):
             message = e.log_message
             self.log.warn(message)
             self.set_status(e.status_code)
+            self.set_header('Content-Type', 'application/json')
             self.finish(json.dumps(dict(message=message)))
         except Exception:
             self.log.error("Unhandled error in API request", exc_info=True)
@@ -348,6 +349,7 @@ def json_errors(method):
             self.set_status(status)
             tb_text = ''.join(traceback.format_exception(t, value, tb))
             reply = dict(message=message, traceback=tb_text)
+            self.set_header('Content-Type', 'application/json')
             self.finish(json.dumps(reply))
         else:
             return result
