$OpenBSD: patch-lib_specinfra_command_openbsd_rb,v 1.7 2014/09/17 06:19:48 jasper Exp $

From de5bb690d462211bb9210ab3ad671dba0929644e Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@humppa.nl>
Date: Wed, 17 Sep 2014 00:00:59 +0200
Subject: [PATCH] use rcctl(8) when dealing with services on OpenBSD

--- lib/specinfra/command/openbsd.rb.orig	Tue Sep 16 23:54:31 2014
+++ lib/specinfra/command/openbsd.rb	Tue Sep 16 23:54:38 2014
@@ -2,7 +2,7 @@ module SpecInfra
   module Command
     class OpenBSD < Base
       def check_enabled(service, level=3)
-        "egrep '(#{escape(service)}_flags=|^pkg_scripts=\"(.*)#{escape(service)}(.*)\")' /etc/rc.conf.local | grep -v \=NO"
+        "rcctl status #{escape(service)}"
       end
 
       def check_file_md5checksum(file, expected)
@@ -76,7 +76,7 @@ module SpecInfra
 #      end
 
       def check_running(service)
-        "/etc/rc.d/#{escape(service)} status"
+        "rcctl check #{escape(service)}"
       end
 
       def get_mode(file)
