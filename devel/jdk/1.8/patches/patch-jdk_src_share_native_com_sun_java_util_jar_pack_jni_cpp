$OpenBSD: patch-jdk_src_share_native_com_sun_java_util_jar_pack_jni_cpp,v 1.1 2018/04/11 12:25:59 sthen Exp $

Index: jdk/src/share/native/com/sun/java/util/jar/pack/jni.cpp
--- jdk/src/share/native/com/sun/java/util/jar/pack/jni.cpp.orig
+++ jdk/src/share/native/com/sun/java/util/jar/pack/jni.cpp
@@ -292,7 +292,7 @@ Java_com_sun_java_util_jar_pack_NativeUnpack_getUnused
 
   if (uPtr->aborting()) {
     THROW_IOE(uPtr->get_abort_message());
-    return false;
+    return NULL;
   }
 
   // We have fetched all the files.
@@ -310,7 +310,7 @@ Java_com_sun_java_util_jar_pack_NativeUnpack_getUnused
 JNIEXPORT jlong JNICALL
 Java_com_sun_java_util_jar_pack_NativeUnpack_finish(JNIEnv *env, jobject pObj) {
   unpacker* uPtr = get_unpacker(env, pObj, false);
-  CHECK_EXCEPTION_RETURN_VALUE(uPtr, NULL);
+  CHECK_EXCEPTION_RETURN_VALUE(uPtr, 0);
   size_t consumed = uPtr->input_consumed();
   free_unpacker(env, pObj, uPtr);
   return consumed;
