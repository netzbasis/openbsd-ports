$OpenBSD: patch-src_plugins_qtsupport_baseqtversion_cpp,v 1.2 2020/04/24 13:14:09 rsadowski Exp $

QtSupport: Work around OpenBSD's idiosyncratic naming scheme

Fixes: QTCREATORBUG-23818
Change-Id: I0b2ec8621224dbfbe1a1e2c5990a9c168573dc8e

Index: src/plugins/qtsupport/baseqtversion.cpp
--- src/plugins/qtsupport/baseqtversion.cpp.orig
+++ src/plugins/qtsupport/baseqtversion.cpp
@@ -2034,6 +2034,9 @@ FilePaths BaseQtVersionPrivate::qtCorePaths()
                 else if (file.endsWith(".dll")
                          || file.endsWith(QString::fromLatin1(".so.") + versionString)
                          || file.endsWith(".so")
+#if defined(Q_OS_OPENBSD)
+                         || file.contains(QRegularExpression("\\.so\\.[0-9]+\\.[0-9]+$")) // QTCREATORBUG-23818
+#endif
                          || file.endsWith(QLatin1Char('.') + versionString + ".dylib"))
                     dynamicLibs.append(FilePath::fromFileInfo(info));
             }
