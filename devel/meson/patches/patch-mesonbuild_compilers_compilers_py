$OpenBSD: patch-mesonbuild_compilers_compilers_py,v 1.4 2018/05/05 09:34:47 jasper Exp $

From e7218ae0ec92ac57dda4b9b572b24a9e39ba4b74 Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@humppa.nl>
Date: Fri, 4 May 2018 21:51:59 +0200
Subject: [PATCH] add linker flag to handle $ORIGIN on OpenBSD

Index: mesonbuild/compilers/compilers.py
--- mesonbuild/compilers/compilers.py.orig
+++ mesonbuild/compilers/compilers.py
@@ -909,10 +909,10 @@ class Compiler:
             else:
                 paths = paths + ':' + padding
         args = []
-        if mesonlib.is_dragonflybsd():
+        if mesonlib.is_dragonflybsd() or mesonlib.is_openbsd():
             # This argument instructs the compiler to record the value of
             # ORIGIN in the .dynamic section of the elf. On Linux this is done
-            # by default, but is not on dragonfly for some reason. Without this
+            # by default, but is not on dragonfly/openbsd for some reason. Without this
             # $ORIGIN in the runtime path will be undefined and any binaries
             # linked against local libraries will fail to resolve them.
             args.append('-Wl,-z,origin')
