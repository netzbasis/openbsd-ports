$OpenBSD: patch-src_decoder_plugins_MpcdecDecoderPlugin_cxx,v 1.1 2015/10/20 15:10:42 dcoppa Exp $

commit 2a58f2264936787ddd96b40c7626046592c2d1a0
Author: Max Kellermann <max@duempel.org>
Date:   Wed Aug 5 23:19:22 2015 +0200

decoder/mpcdec: use Clamp()

--- src/decoder/plugins/MpcdecDecoderPlugin.cxx.orig	Sat Oct 25 00:28:53 2014
+++ src/decoder/plugins/MpcdecDecoderPlugin.cxx	Tue Oct 20 16:56:34 2015
@@ -26,6 +26,7 @@
 #include "util/Error.hxx"
 #include "util/Domain.hxx"
 #include "util/Macros.hxx"
+#include "util/Clamp.hxx"
 #include "Log.hxx"
 
 #include <mpc/mpcdec.h>
@@ -117,12 +118,7 @@ mpc_to_mpd_sample(MPC_SAMPLE_FORMAT sample)
 	val = sample * float_scale;
 #endif
 
-	if (val < clip_min)
-		val = clip_min;
-	else if (val > clip_max)
-		val = clip_max;
-
-	return val;
+	return Clamp(val, clip_min, clip_max);
 }
 
 static void
