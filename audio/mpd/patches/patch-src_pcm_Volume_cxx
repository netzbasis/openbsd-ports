$OpenBSD: patch-src_pcm_Volume_cxx,v 1.1 2016/07/04 08:50:28 dcoppa Exp $

commit ba8e579e9b8126a694d1125e001acddbeb494299
Author: Max Kellermann <max@duempel.org>
Date:   Fri Jul 1 21:22:21 2016 +0200

pcm/Volume: use 0x69 to generate DSD silence

--- src/pcm/Volume.cxx.orig	Sat Oct 25 00:28:53 2014
+++ src/pcm/Volume.cxx	Mon Jul  4 10:34:42 2016
@@ -134,9 +134,11 @@ PcmVolume::Apply(ConstBuffer<void> src)
 
 	if (volume == 0) {
 		/* optimized special case: 0% volume = memset(0) */
-		/* TODO: is this valid for all sample formats? What
-		   about floating point? */
-		memset(data, 0, src.size);
+		uint8_t pattern = 0;
+		if (format == SampleFormat::DSD)
+			pattern = 0x69;
+
+		memset(data, pattern, src.size);
 		return { data, src.size };
 	}
 
