$OpenBSD: patch-CMakeLists_txt,v 1.3 2015/10/28 09:57:35 sthen Exp $

don't pick up libevent2 from ports, otherwise rspamd links against
both libevent from base *and* libevent2

--- CMakeLists.txt.orig	Tue Oct 27 07:19:47 2015
+++ CMakeLists.txt	Wed Oct 28 01:43:41 2015
@@ -492,6 +492,11 @@ IF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 	SET(TAR "gtar")
 ENDIF(CMAKE_SYSTEM_NAME STREQUAL "FreeBSD")
 
+IF(CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+	MESSAGE(STATUS "Configuring for OpenBSD")
+	SET(POE_LOOP "Loop::Kqueue")
+ENDIF(CMAKE_SYSTEM_NAME STREQUAL "OpenBSD")
+
 IF(CMAKE_SYSTEM_NAME STREQUAL "Darwin")
 	SET(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} -D_BSD_SOURCE -DDARWIN")
 	SET(CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS "${CMAKE_SHARED_LIBRARY_CREATE_C_FLAGS} -undefined dynamic_lookup")
@@ -607,7 +612,7 @@ ProcessPackage(PCRE LIBRARY pcre INCLUDE pcre.h INCLUD
 ProcessPackage(GMIME LIBRARY gmime-2.6 gmime-2.4 gmime-2.2 gmime-2 INCLUDE gmime.h INCLUDE_SUFFIXES include/gmime 
 	ROOT ${GMIME_ROOT_DIR} MODULES gmime-2.6 gmime-2.4 gmime-2.0)
 ProcessPackage(LIBEVENT LIBRARY event INCLUDE event.h INCLUDE_SUFFIXES include/event 
-	ROOT ${LIBEVENT_ROOT_DIR} MODULES event libevent)
+	ROOT ${LIBEVENT_ROOT_DIR} MODULES event)
 ProcessPackage(SQLITE3 LIBRARY sqlite3 INCLUDE sqlite3.h INCLUDE_SUFFIXES include/sqlite3 include/sqlite 
 	ROOT ${SQLITE3_ROOT_DIR} MODULES sqlite3 sqlite)
 ProcessPackage(ICONV LIBRARY iconv libiconv libiconv-2 c INCLUDE iconv.h INCLUDE_SUFFIXES include/libiconv
@@ -1121,4 +1126,4 @@ ADD_CUSTOM_TARGET(dist ${CMAKE_SOURCE_DIR}/dist.sh
 IF(NOT DEBIAN_BUILD)
 	ADD_CUSTOM_TARGET(check DEPENDS rspamd-test)
 	ADD_CUSTOM_TARGET(run-test DEPENDS check COMMAND test/rspamd-test)
-ENDIF(NOT DEBIAN_BUILD)
\ No newline at end of file
+ENDIF(NOT DEBIAN_BUILD)
