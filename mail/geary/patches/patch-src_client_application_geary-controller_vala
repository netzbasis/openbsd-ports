$OpenBSD: patch-src_client_application_geary-controller_vala,v 1.1 2018/12/22 08:02:30 ajacoutot Exp $

From 088cb2c0aa35ad4b54ea5a0a2edaf0ff96c64b45 Mon Sep 17 00:00:00 2001
From: Rico Tzschichholz <ricotz@ubuntu.com>
Date: Tue, 27 Nov 2018 14:53:56 +0100
Subject: [PATCH] Actually use error variable to check for IOError.CANCELLED

Index: src/client/application/geary-controller.vala
--- src/client/application/geary-controller.vala.orig
+++ src/client/application/geary-controller.vala
@@ -2522,7 +2522,7 @@ public class GearyController : Geary.BaseObject {
             yield do_empty_folder_async(emptyable, cancellable);
         } catch (Error err) {
             // don't report to user if cancelled
-            if (cancellable is IOError.CANCELLED)
+            if (err is IOError.CANCELLED)
                 return;
             
             ErrorDialog dialog = new ErrorDialog(main_window,
