$OpenBSD: patch-content_renderer_renderer_main_cc,v 1.9 2016/09/01 16:28:11 robert Exp $
--- content/renderer/renderer_main.cc.orig.port	Thu Sep  1 00:03:31 2016
+++ content/renderer/renderer_main.cc	Thu Sep  1 11:12:22 2016
@@ -31,6 +31,7 @@
 #include "content/renderer/render_thread_impl.h"
 #include "content/renderer/renderer_main_platform_delegate.h"
 #include "third_party/skia/include/core/SkGraphics.h"
+#include "third_party/skia/include/ports/SkFontConfigInterface.h"
 #include "ui/base/ui_base_switches.h"
 
 #if defined(OS_ANDROID)
@@ -59,6 +60,11 @@
 #include "ui/ozone/public/client_native_pixmap_factory.h"
 #endif
 
+#if defined(OS_BSD)
+#include "content/common/child_process_sandbox_support_impl_linux.h"
+#include "content/common/font_config_ipc_linux.h"
+#endif
+
 namespace content {
 namespace {
 // This function provides some ways to test crash and assertion handling
@@ -168,9 +174,13 @@ int RendererMain(const MainFunctionParams& parameters)
   // is OK.
   InitializeWebRtcModule();
 #endif
+#if defined(OS_BSD)
+  SkFontConfigInterface::SetGlobal(
+      new FontConfigIPC(GetSandboxFD()))->unref();
+#endif
 
   {
-#if defined(OS_WIN) || defined(OS_MACOSX)
+#if defined(OS_WIN) || defined(OS_MACOSX) || defined(OS_BSD)
     // TODO(markus): Check if it is OK to unconditionally move this
     // instruction down.
     RenderProcessImpl render_process;
@@ -180,7 +190,7 @@ int RendererMain(const MainFunctionParams& parameters)
     bool run_loop = true;
     if (!no_sandbox)
       run_loop = platform.EnableSandbox();
-#if defined(OS_POSIX) && !defined(OS_MACOSX)
+#if defined(OS_POSIX) && !defined(OS_MACOSX) && !defined(OS_BSD)
     RenderProcessImpl render_process;
     RenderThreadImpl::Create(std::move(main_message_loop),
                              std::move(renderer_scheduler));
