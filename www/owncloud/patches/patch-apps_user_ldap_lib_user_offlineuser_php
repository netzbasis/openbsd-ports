$OpenBSD: patch-apps_user_ldap_lib_user_offlineuser_php,v 1.2 2015/11/16 09:53:12 ajacoutot Exp $

From a2f2ffb8dbcb7f9cb0fe139f592be0d4772bec20 Mon Sep 17 00:00:00 2001
From: Arthur Schiwon <blizzz@owncloud.com>
Date: Fri, 30 Oct 2015 19:20:42 +0100
Subject: [PATCH] if a user that is flag as deleted shows up again, remove that flag. Fixes #20090

--- apps/user_ldap/lib/user/offlineuser.php.orig	Mon Oct 19 15:21:55 2015
+++ apps/user_ldap/lib/user/offlineuser.php	Mon Nov 16 10:50:47 2015
@@ -85,6 +85,13 @@ class OfflineUser {
 	}
 
 	/**
+	 * remove the Delete-flag from the user.
+	 */
+	public function unmark() {
+		$this->config->setUserValue($this->ocName, 'user_ldap', 'isDeleted', '0');
+	}
+
+	/**
 	 * exports the user details in an assoc array
 	 * @return array
 	 */
