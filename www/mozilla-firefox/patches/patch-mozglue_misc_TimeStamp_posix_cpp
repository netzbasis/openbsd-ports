$OpenBSD: patch-mozglue_misc_TimeStamp_posix_cpp,v 1.1 2018/05/11 20:00:57 landry Exp $

neuter KERN_PROC sysctl when running w/ pledge
Index: mozglue/misc/TimeStamp_posix.cpp
--- mozglue/misc/TimeStamp_posix.cpp.orig
+++ mozglue/misc/TimeStamp_posix.cpp
@@ -313,6 +313,10 @@ TimeStamp::ComputeProcessUptime()
   struct timespec ts;
   int rv = clock_gettime(CLOCK_REALTIME, &ts);
 
+#if defined(__OpenBSD__) && defined(MOZ_SANDBOX)
+  fprintf(stderr, "%s called when pledged, noop\n", __func__);
+  return 0;
+#endif
   if (rv == -1) {
     return 0;
   }
