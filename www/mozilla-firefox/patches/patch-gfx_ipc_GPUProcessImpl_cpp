$OpenBSD: patch-gfx_ipc_GPUProcessImpl_cpp,v 1.1 2019/12/03 17:00:46 landry Exp $

sandbox the gpu process
https://bugzilla.mozilla.org/show_bug.cgi?id=1580268
https://hg.mozilla.org/mozilla-central/rev/8e2be8ec03fc1f6eab748d35240c41c1656724f8

Index: gfx/ipc/GPUProcessImpl.cpp
--- gfx/ipc/GPUProcessImpl.cpp.orig
+++ gfx/ipc/GPUProcessImpl.cpp
@@ -10,6 +10,8 @@
 
 #if defined(OS_WIN) && defined(MOZ_SANDBOX)
 #  include "mozilla/sandboxTarget.h"
+#elif defined(__OpenBSD__) && defined(MOZ_SANDBOX)
+#  include "mozilla/SandboxSettings.h"
 #endif
 
 namespace mozilla {
@@ -25,6 +27,8 @@ GPUProcessImpl::~GPUProcessImpl() {}
 bool GPUProcessImpl::Init(int aArgc, char* aArgv[]) {
 #if defined(MOZ_SANDBOX) && defined(OS_WIN)
   mozilla::SandboxTarget::Instance()->StartSandbox();
+#elif defined(__OpenBSD__) && defined(MOZ_SANDBOX)
+  StartOpenBSDSandbox(GeckoProcessType_GPU);
 #endif
   char* parentBuildID = nullptr;
   char* prefsHandle = nullptr;
