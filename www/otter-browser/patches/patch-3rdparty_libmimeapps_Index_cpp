$OpenBSD: patch-3rdparty_libmimeapps_Index_cpp,v 1.1 2015/12/08 13:55:01 sthen Exp $
--- 3rdparty/libmimeapps/Index.cpp.orig	Tue Dec  1 19:50:55 2015
+++ 3rdparty/libmimeapps/Index.cpp	Tue Dec  1 21:40:01 2015
@@ -49,19 +49,8 @@ Index::Index(const std::string &language):
 {
 	findDirectories();
 	createBase();
-	removeUnused();
 }
 
-Index::~Index()
-{
-	std::map<std::string, DesktopEntry*>::iterator application;
-
-	for (application = knownApplications_.begin(); application != knownApplications_.end(); ++application)
-	{
-		delete application->second;
-	}
-}
-
 std::vector<DesktopEntry> Index::appsForMime(const std::string &type) const
 {
 	std::vector<DesktopEntry> result;
@@ -194,10 +183,6 @@ void Index::processDesktopFile(const std::string &base
 	{
 		addApplication(entry);
 	}
-	else
-	{
-		delete entry;
-	}
 }
 
 void Index::addApplication(DesktopEntry *entry)
@@ -244,21 +229,6 @@ void Index::removeFromType(const std::string &type, co
 			{
 				++it;
 			}
-		}
-	}
-}
-
-void Index::removeUnused()
-{
-	std::map<std::string, DesktopEntry*>::iterator application;
-
-	for (application = knownApplications_.begin(); application != knownApplications_.end(); ++application)
-	{
-		if (application->second->types().empty())
-		{
-			delete application->second;
-
-			knownApplications_.erase(application);
 		}
 	}
 }
