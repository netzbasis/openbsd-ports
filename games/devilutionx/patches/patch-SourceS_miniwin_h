$OpenBSD: patch-SourceS_miniwin_h,v 1.1.1.1 2019/07/19 13:42:33 bcallah Exp $

clang

Index: SourceS/miniwin.h
--- SourceS/miniwin.h.orig
+++ SourceS/miniwin.h
@@ -3,7 +3,7 @@
 #include <ctype.h>
 #include <math.h>
 // work around https://reviews.llvm.org/D51265
-#if defined(__APPLE__) || defined(__FreeBSD__)
+#if defined(__APPLE__) || defined(__FreeBSD__) || defined(__OpenBSD__)
 #include "macos_stdarg.h"
 #else
 #include <stdarg.h>
@@ -17,6 +17,10 @@
 #if !defined(_MSC_VER) && defined(DEVILUTION_ENGINE)
 #if defined(__x86_64__) || defined(__i386__)
 #include <x86intrin.h>
+#if defined(__clang__)
+#define _rotl(x, v) __builtin_rotateleft32(x, v)
+#define _rotr(x, v) __builtin_rotateright32(x, v)
+#endif
 #else
 unsigned int _rotl(unsigned int value, int shift);
 unsigned int _rotr(unsigned int value, int shift);
