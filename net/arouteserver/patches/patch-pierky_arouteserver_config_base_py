$OpenBSD: patch-pierky_arouteserver_config_base_py,v 1.1.1.1 2019/10/06 20:33:43 sthen Exp $

From c14e457395403ae3f1125d9dffceb0ee385ce5ec Mon Sep 17 00:00:00 2001
From: Pier Carlo Chiodi <pierky@pierky.com>
Date: Sun, 6 Oct 2019 19:43:50 +0200
Subject: [PATCH] Prevent unknown escapes in env var from breaking

Index: pierky/arouteserver/config/base.py
--- pierky/arouteserver/config/base.py.orig
+++ pierky/arouteserver/config/base.py
@@ -78,7 +78,5 @@ class ConfigParserBase(object):
         def expand_env_vars(doc):
             res = doc
-            for v in os.environ:
-                res = re.sub("\$\{" + v + "\}", os.environ[v], res)
-            res = re.sub("\$\{[A-Za-z0-9_]+\}", "", res)
+            res = os.path.expandvars(res)
             return res
 
