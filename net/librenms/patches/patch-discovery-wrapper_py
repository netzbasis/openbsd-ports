$OpenBSD: patch-discovery-wrapper_py,v 1.1 2017/11/27 17:41:36 sthen Exp $

Index: discovery-wrapper.py
--- discovery-wrapper.py.orig
+++ discovery-wrapper.py
@@ -63,7 +63,7 @@ config_file = install_dir + '/config.php'
 
 
 def get_config_data():
-    config_cmd = ['/usr/bin/env', 'php', '%s/config_to_json.php' % install_dir]
+    config_cmd = ['%PHP%', '%s/config_to_json.php' % install_dir]
     try:
         proc = subprocess.Popen(config_cmd, stdout=subprocess.PIPE, stdin=subprocess.PIPE)
     except:
@@ -305,7 +305,7 @@ def poll_worker():
 # EOC5
             try:
                 start_time = time.time()
-                command = "/usr/bin/env php %s -h %s >> /dev/null 2>&1" % (discovery_path, device_id)
+                command = "%PHP% %s -h %s >> /dev/null 2>&1" % (discovery_path, device_id)
                 subprocess.check_call(command, shell=True)
                 elapsed_time = int(time.time() - start_time)
                 print_queue.put([threading.current_thread().name, device_id, elapsed_time])
