$OpenBSD: patch-src_curve_server_cpp,v 1.1 2015/11/03 19:14:13 sthen Exp $

https://github.com/zeromq/libzmq/issues/1632

--- src/curve_server.cpp.orig	Tue Nov  3 16:35:06 2015
+++ src/curve_server.cpp	Tue Nov  3 16:36:49 2015
@@ -60,8 +60,8 @@ zmq::curve_server_t::curve_server_t (session_base_t *s
     unsigned char tmpbytes[4];
     randombytes(tmpbytes, 4);
 #else
-    // todo check return code
-    sodium_init();
+    const int ret = sodium_init();
+    zmq_assert ((ret == 0) || (ret == 1));
 #endif
 
     //  Generate short-term key pair
