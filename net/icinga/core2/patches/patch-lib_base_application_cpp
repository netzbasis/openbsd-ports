$OpenBSD: patch-lib_base_application_cpp,v 1.3 2015/10/21 09:03:22 sthen Exp $

From e93dd3cf15dab8c63d6510334b1b27b1e208f83a Mon Sep 17 00:00:00 2001
From: Gunnar Beutner <gunnar@beutner.name>
Date: Wed, 21 Oct 2015 07:02:49 +0200
Subject: [PATCH] Ensure that the main thread pool gets re-initialized properly
 after fork()

refs #10410
---
 lib/base/application.cpp |  2 +-
 lib/base/threadpool.cpp  | 12 ++++++++++--
 2 files changed, 11 insertions(+), 3 deletions(-)

--- lib/base/application.cpp.orig	Wed Oct 21 09:23:05 2015
+++ lib/base/application.cpp	Wed Oct 21 09:23:28 2015
@@ -142,7 +142,7 @@ void Application::InitializeBase(void)
 	Utility::ExecuteDeferredInitializers();
 
 	/* make sure the thread pool gets initialized */
-	GetTP();
+	GetTP().Start();
 
 	Timer::Initialize();
 }
