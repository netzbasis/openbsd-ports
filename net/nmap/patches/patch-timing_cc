$OpenBSD: patch-timing_cc,v 1.4 2015/09/11 15:56:43 sthen Exp $

Avoid float-related assertion triggered on i386, not triggered on
macppc/amd64/sparc64.

--- timing.cc.orig	Sat Aug 16 04:45:47 2014
+++ timing.cc	Fri Sep 11 17:55:26 2015
@@ -128,4 +128,6 @@
 
+#include <limits>
+
 #include "timing.h"
 #include "NmapOps.h"
 #include "utils.h"
@@ -436,7 +438,7 @@ void RateMeter::update(double amount, const struct tim
     interval = MAX(current_rate_history, diff);
   else
     interval = TIMEVAL_SUBTRACT(*now, start_tv) / 1000000.0;
-  assert(diff <= interval);
+  assert(diff <= interval + std::numeric_limits<float>::epsilon());
   /* If we record an amount in the very same instant that the timer is started,
      there's no way to calculate meaningful rates. Ignore it. */
   if (interval == 0.0)
