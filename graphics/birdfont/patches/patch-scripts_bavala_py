$OpenBSD: patch-scripts_bavala_py,v 1.7 2015/09/19 13:37:38 ajacoutot Exp $
--- scripts/bavala.py.orig	Fri Aug 28 14:00:12 2015
+++ scripts/bavala.py	Sat Sep 19 15:17:14 2015
@@ -102,7 +102,7 @@ class Vala(object):
             self.header = join(build, library) + '.h'
             self.vapi = join(build, library) + '.vapi' # generated vapi file
             self.other_vapi_files = get_sources_path (src, '*.vapi') # other vapi files
-            self.so = join(build, src) + '.so.' + so_version
+            self.so = join(build, src) + '.so.' + '${LIBbirdfont_VERSION}'
             self.so_link = join(build, src) + '.so'
             self.so_link_name = src + '.so'
             self.so_version = so_version
@@ -229,6 +229,8 @@ class Vala(object):
         
         if not "bsd" in sys.platform or "kfreebsd" in sys.platform:
             create_link = "ln -s -T " + so_file + " " + self.so_link_name + " "
+	else:
+            create_link = "ln -s " + so_file + " " + self.so_link_name + " "
 
         create_link += "&& mv " + self.so_link_name + " " + self.build + "/" 
         return {
