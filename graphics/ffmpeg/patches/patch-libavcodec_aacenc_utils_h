$OpenBSD: patch-libavcodec_aacenc_utils_h,v 1.1 2015/09/12 09:44:54 ajacoutot Exp $

aacenc: copy PRNG from the decoder

--- libavcodec/aacenc_utils.h.orig	Sat Sep 12 02:09:48 2015
+++ libavcodec/aacenc_utils.h	Sat Sep 12 02:09:57 2015
@@ -128,6 +128,15 @@ static inline int quant_array_idx(const float val, con
     return index;
 }
 
+/*
+ * linear congruential pseudorandom number generator, copied from the decoder
+ */
+static inline int lcg_random(unsigned previous_val)
+{
+    union { unsigned u; int s; } v = { previous_val * 1664525u + 1013904223 };
+    return v.s;
+}
+
 #define ERROR_IF(cond, ...) \
     if (cond) { \
         av_log(avctx, AV_LOG_ERROR, __VA_ARGS__); \
