$OpenBSD: patch-src_Resources_vala,v 1.2 2017/03/15 10:37:44 ajacoutot Exp $

From b11f1b0fe626f50c5c715018d97bf7e438777fd7 Mon Sep 17 00:00:00 2001
From: Jens Georg <mail@jensge.org>
Date: Tue, 14 Mar 2017 20:44:44 +0100
Subject: Check for LC_MEASUREMENT in a more portable way

--- src/Resources.vala.orig	Mon Mar 13 19:34:49 2017
+++ src/Resources.vala	Wed Mar 15 11:18:41 2017
@@ -768,11 +768,6 @@ along with Shotwell; if not, write to the Free Softwar
 
     }
 
-    [CCode (cname = "int", cprefix = "LC_", cheader_filename = "locale.h", has_type_id = false)]
-    private enum Lc {
-        MEASUREMENT
-    }
-
     public enum UnitSystem {
         IMPERIAL,
         METRIC,
@@ -788,7 +783,7 @@ along with Shotwell; if not, write to the Free Softwar
             return unit_system;
         }
 
-        lc_measurement = Intl.setlocale((LocaleCategory) Lc.MEASUREMENT, null);
+        lc_measurement = Environment.get_variable("LC_MEASUREMENT");
         if (lc_measurement == null) {
             lc_measurement = Intl.get_language_names()[0];
         }
