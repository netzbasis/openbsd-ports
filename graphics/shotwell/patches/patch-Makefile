$OpenBSD: patch-Makefile,v 1.21 2016/06/21 12:38:07 ajacoutot Exp $

remove gudev requirement

--- Makefile.orig	Mon Jun 20 20:58:28 2016
+++ Makefile	Tue Jun 21 14:30:38 2016
@@ -3,7 +3,6 @@ PROGRAM_THUMBNAILER = shotwell-video-thumbnailer
 PROGRAM_MIGRATOR = shotwell-settings-migrator
 
 VERSION = 0.23.2
-GITVER := $(shell git rev-parse HEAD)
 GETTEXT_PACKAGE = $(PROGRAM)
 BUILD_ROOT = 1
 
@@ -43,11 +42,6 @@ endif
 DEFINES := _PREFIX='"$(PREFIX)"' _VERSION='"$(VERSION)"' GETTEXT_PACKAGE='"$(GETTEXT_PACKAGE)"' \
 	_LANG_SUPPORT_DIR='"$(SYSTEM_LANG_DIR)"' _LIB='"${LIB}"' _LIBEXECDIR='"$(LIBEXECDIR)"'
 
-ifdef GITVER
-DEFINES := $(DEFINES) _GIT_VERSION='"$(GITVER)"'
-VALAFLAGS := $(VALAFLAGS) --define=_GITVERSION
-endif
-
 EXPORT_FLAGS = -export-dynamic
 
 include units.mk
@@ -237,7 +231,6 @@ EXT_PKGS = \
 	gstreamer-base-1.0 \
 	gstreamer-pbutils-1.0 \
 	gtk+-3.0 \
-	gudev-1.0 \
 	libexif \
 	libgphoto2 \
 	json-glib-1.0 \
@@ -269,7 +262,6 @@ EXT_PKG_VERSIONS = \
 	gstreamer-plugins-base-1.0 >= 1.0.0 \
 	gstreamer-pbutils-1.0 >= 1.0.0 \
 	gtk+-3.0 >= 3.12.2 \
-	gudev-1.0 >= 145 \
 	libexif >= 0.6.16 \
 	libgphoto2 >= 2.4.2 \
 	libraw >= 0.13.2 \
@@ -527,8 +519,8 @@ ifndef DISABLE_SCHEMAS_COMPILE
 	glib-compile-schemas $(DESTDIR)$(PREFIX)/share/glib-2.0/schemas
 endif
 ifndef DISABLE_GSETTINGS_CONVERT_INSTALL
-	mkdir -p $(DESTDIR)/usr/share/GConf/gsettings
-	$(INSTALL_DATA) misc/shotwell.convert $(DESTDIR)/usr/share/GConf/gsettings
+	mkdir -p $(DESTDIR)/${TRUEPREFIX}/share/GConf/gsettings
+	$(INSTALL_DATA) misc/shotwell.convert $(DESTDIR)/${TRUEPREFIX}/share/GConf/gsettings
 endif
 ifndef DISABLE_ICON_UPDATE
 	-gtk-update-icon-cache -t -f $(DESTDIR)$(PREFIX)/share/icons/hicolor || :
