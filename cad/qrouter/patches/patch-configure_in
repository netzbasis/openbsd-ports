$OpenBSD: patch-configure_in,v 1.2 2020/02/03 22:21:57 sthen Exp $

Index: configure.in
--- configure.in.orig
+++ configure.in
@@ -861,7 +861,13 @@ if test $usingTcl ; then
       CFLAGS="${CFLAGS} -L/usr/X11R6/include"
       ;;
 
-    *-netbsd*|*-openbsd*)
+    *-openbsd*)
+      SHLIB_CFLAGS="-fpic"
+      LDDL_FLAGS="-shared ${LIB_SPECS}"
+      CFLAGS="${CFLAGS} -I${X11BASE}/include"
+      ;;
+
+    *-netbsd*)
       # Not available on all versions:  check for include file.
       AC_CHECK_HEADER(dlfcn.h, test_ok=yes, test_ok=no)
       if test "$test_ok" = yes; then
@@ -885,7 +891,13 @@ if test $usingTcl ; then
     esac
   fi
   if test "$with_gnu_ld" = "yes" ; then
-    LDDL_FLAGS="${LDDL_FLAGS} -Wl,--version-script=symbol.map"
+    case $target in
+      *-openbsd*)
+        ;;
+      *)
+        LDDL_FLAGS="${LDDL_FLAGS} -Wl,--version-script=symbol.map"
+        ;;
+    esac
   fi
 
   AC_SUBST(SHDLIB_EXT)
