$OpenBSD: patch-cmake_modules_SetupBuildFlags_cmake,v 1.3 2017/04/28 08:11:51 ajacoutot Exp $

From 086d78f58e59c2bb838771891029e3da5f9e636a Mon Sep 17 00:00:00 2001
From: Antoine Jacoutot <ajacoutot@gnome.org>
Date: Fri, 28 Apr 2017 09:49:43 +0200
Subject: Bug 781833 - Do not set '-Wl,--no-undefined' on BSD

--- cmake/modules/SetupBuildFlags.cmake.orig	Mon Apr 10 09:40:17 2017
+++ cmake/modules/SetupBuildFlags.cmake	Thu Apr 27 14:41:09 2017
@@ -77,9 +77,9 @@ macro(setup_build_flags _maintainer_mode)
 		endforeach()
 	endif(CMAKE_CXX_COMPILER_ID)
 
-	if(("${CMAKE_C_COMPILER_ID}" STREQUAL "Clang") OR ("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU"))
+	if(("${CMAKE_C_COMPILER_ID}" STREQUAL "Clang") OR ("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU") AND (NOT ${CMAKE_SYSTEM_NAME} MATCHES "BSD"))
 		set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,--no-undefined")
 		set(CMAKE_MODULE_LINKER_FLAGS "${CMAKE_MODULE_LINKER_FLAGS} -Wl,--no-undefined")
 		set(CMAKE_SHARED_LINKER_FLAGS "${CMAKE_SHARED_LINKER_FLAGS} -Wl,--no-undefined")
-	endif(("${CMAKE_C_COMPILER_ID}" STREQUAL "Clang") OR ("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU"))
+	endif(("${CMAKE_C_COMPILER_ID}" STREQUAL "Clang") OR ("${CMAKE_C_COMPILER_ID}" STREQUAL "GNU") AND (NOT ${CMAKE_SYSTEM_NAME} MATCHES "BSD"))
 endmacro()
