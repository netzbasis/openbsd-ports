$OpenBSD: patch-src_gr-recipe-formatter_c,v 1.3 2017/05/28 07:57:03 jasper Exp $

From c4640281d2a31b27ce026137cea2e1666015c40b Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@humppa.nl>
Date: Sat, 27 May 2017 17:41:42 +0200
Subject: Fallback to metric if non-standard _NL_MEASUREMENT_MEASUREMENT isn't defined

Index: src/gr-recipe-formatter.c
--- src/gr-recipe-formatter.c.orig
+++ src/gr-recipe-formatter.c
@@ -48,12 +48,14 @@ get_temperature_unit (void)
         GSettings *settings = gr_settings_get ();
         unit =  g_settings_get_enum (settings, "temperature-unit");
         if (unit == GR_TEMPERATURE_UNIT_LOCALE) {
+#ifdef _NL_MEASUREMENT_MEASUREMENT
                 const gchar *fmt;
 
                 fmt = nl_langinfo (_NL_MEASUREMENT_MEASUREMENT);
                 if (fmt && *fmt == 2)
                         unit = GR_TEMPERATURE_UNIT_FAHRENHEIT;
                 else
+#endif
                         unit = GR_TEMPERATURE_UNIT_CELSIUS;
         }
 
