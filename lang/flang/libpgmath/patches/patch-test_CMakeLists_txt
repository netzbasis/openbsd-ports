$OpenBSD: patch-test_CMakeLists_txt,v 1.1 2019/08/12 15:41:55 bcallah Exp $

Index: test/CMakeLists.txt
--- test/CMakeLists.txt.orig
+++ test/CMakeLists.txt
@@ -114,11 +114,11 @@ set(LIBPGMATH_GETARCH_LIB_FULL "${CMAKE_SHARED_LIBRARY
   target_include_directories(${LIBPGMATH_GETARCH_LIB} PUBLIC ${LIBPGMATH_SRC_DIR}/x86_64)
   add_dependencies(check-lib${LIBPGMATH_LIBRARY_NAME} ${LIBPGMATH_GETARCH_LIB})
 
-  if(${CMAKE_SYSTEM_NAME} MATCHES "Linux")
+  if(${LIBPGMATH_SYSTEM_NAME} MATCHES "Linux")
     set_property(TARGET ${LIBPGMATH_GETARCH_LIB} APPEND PROPERTY COMPILE_DEFINITIONS TARGET_LINUX_X8664)
-  elseif(${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
+  elseif(${LIBPGMATH_SYSTEM_NAME} MATCHES "Darwin")
     set_property(TARGET ${LIBPGMATH_GETARCH_LIB} APPEND PROPERTY COMPILE_DEFINITIONS TARGET_OSX_X8664)
-  elseif(${CMAKE_SYSTEM_NAME} MATCHES "Windows")
+  elseif(${LIBPGMATH_SYSTEM_NAME} MATCHES "Windows")
     set_property(TARGET ${LIBPGMATH_GETARCH_LIB} APPEND PROPERTY COMPILE_DEFINITIONS TARGET_WIN_X8664)
     set_property(TARGET ${LIBPGMATH_GETARCH_LIB} PROPERTY WINDOWS_EXPORT_ALL_SYMBOLS TRUE)
   endif()
