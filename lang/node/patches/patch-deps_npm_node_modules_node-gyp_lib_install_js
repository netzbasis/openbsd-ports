$OpenBSD: patch-deps_npm_node_modules_node-gyp_lib_install_js,v 1.11 2019/11/24 18:42:28 abieber Exp $

Allow building of sub-packages (ie. node-sqlite3) with USE_SYSTRACE
set, also prevents downloading of the node distfile again.

Index: deps/npm/node_modules/node-gyp/lib/install.js
--- deps/npm/node_modules/node-gyp/lib/install.js.orig
+++ deps/npm/node_modules/node-gyp/lib/install.js
@@ -128,7 +128,7 @@ function install (fs, gyp, argv, callback) {
       }
 
       // now download the node tarball
-      var tarPath = gyp.opts.tarball
+      var tarPath = gyp.opts['tarball'] || '/usr/local/share/node/node-v12.9.0.tar.gz' // Fix for OpenBSD
       var badDownload = false
       var extractCount = 0
       var contentShasums = {}
