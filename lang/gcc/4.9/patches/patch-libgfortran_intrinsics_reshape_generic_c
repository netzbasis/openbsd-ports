$OpenBSD: patch-libgfortran_intrinsics_reshape_generic_c,v 1.1 2014/08/18 07:42:12 pascal Exp $
--- libgfortran/intrinsics/reshape_generic.c.orig	Thu Jan  2 23:25:45 2014
+++ libgfortran/intrinsics/reshape_generic.c	Thu Aug 14 16:54:00 2014
@@ -99,11 +99,11 @@ reshape_internal (parray *ret, parray *source, shape_t
       ret->offset = 0;
 
       if (unlikely (rs < 1))
-	alloc_size = 1;
+	alloc_size = 0; /* xmalloc will allocate 1 byte.  */
       else
-	alloc_size = rs * size;
+	alloc_size = rs;
 
-      ret->base_addr = xmalloc (alloc_size);
+      ret->base_addr = xmallocarray (alloc_size, size);
 
       ret->dtype = (source->dtype & ~GFC_DTYPE_RANK_MASK) | rdim;
     }
