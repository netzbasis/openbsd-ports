$OpenBSD: patch-src_runtime_testdata_testprogcgo_aprof_go,v 1.1 2016/05/20 16:03:24 jsing Exp $
--- src/runtime/testdata/testprogcgo/aprof.go.orig	Sat May 21 01:03:57 2016
+++ src/runtime/testdata/testprogcgo/aprof.go	Sat May 21 01:04:29 2016
@@ -17,6 +17,7 @@ import (
 	"bytes"
 	"fmt"
 	"runtime/pprof"
+	"time"
 )
 
 func init() {
@@ -31,7 +32,13 @@ func CgoCCodeSIGPROF() {
 	go func() {
 		for {
 			<-c
+			start := time.Now()
 			for i := 0; i < 1e7; i++ {
+				if i%1000 == 0 {
+					if time.Since(start) > time.Second {
+						break
+					}
+				}
 				C.GoNop()
 			}
 			c <- true
