$OpenBSD: patch-Source_Lib_Common_CMakeLists_txt,v 1.1 2020/06/20 11:12:50 ajacoutot Exp $

Index: Source/Lib/Common/CMakeLists.txt
--- Source/Lib/Common/CMakeLists.txt.orig
+++ Source/Lib/Common/CMakeLists.txt
@@ -18,23 +18,16 @@ macro(test_apply_compiler_flags)
         message(STATUS "${CMAKE_CURRENT_SOURCE_DIR}: ${CMAKE_C_FLAGS}")
     endif()
 endmacro()
-if (CMAKE_SYSTEM_PROCESSOR MATCHES "(x86)|(X86)|(amd64)|(AMD64)")
-    set (X86 TRUE)
-else ()
-    set (X86 FALSE)
-endif ()
 
 add_library(common_lib INTERFACE)
 
-if(X86)
 add_subdirectory(Codec)
 add_subdirectory(C_DEFAULT)
-add_subdirectory(ASM_SSE2)
-add_subdirectory(ASM_SSSE3)
-add_subdirectory(ASM_SSE4_1)
-add_subdirectory(ASM_AVX2)
-add_subdirectory(ASM_AVX512)
-else ()
-add_subdirectory(Codec)
-add_subdirectory(C_DEFAULT)
-endif ()
+
+if(X86)
+    add_subdirectory(ASM_SSE2)
+    add_subdirectory(ASM_SSSE3)
+    add_subdirectory(ASM_SSE4_1)
+    add_subdirectory(ASM_AVX2)
+    add_subdirectory(ASM_AVX512)
+endif()
