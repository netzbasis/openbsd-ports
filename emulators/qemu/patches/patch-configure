$OpenBSD: patch-configure,v 1.52 2017/05/06 19:25:18 uaa Exp $
--- configure.orig	Thu Apr 20 23:57:00 2017
+++ configure	Fri May  5 05:51:39 2017
@@ -2985,6 +2985,7 @@ if test "$curses" != "no" ; then
   fi
   curses_found=no
   cat > $TMPC << EOF
+#define _XOPEN_SOURCE_EXTENDED
 #include <locale.h>
 #include <curses.h>
 #include <wchar.h>
@@ -4787,10 +4788,6 @@ fi
 if test "$gcov" = "yes" ; then
   CFLAGS="-fprofile-arcs -ftest-coverage -g $CFLAGS"
   LDFLAGS="-fprofile-arcs -ftest-coverage $LDFLAGS"
-elif test "$fortify_source" = "yes" ; then
-  CFLAGS="-O2 -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=2 $CFLAGS"
-elif test "$debug" = "no"; then
-  CFLAGS="-O2 $CFLAGS"
 fi
 
 ##########################################
@@ -4939,7 +4936,7 @@ if test \( "$cpu" = "i386" -o "$cpu" = "x86_64" \) -a 
     # Different host OS linkers have different ideas about the name of the ELF
     # emulation. Linux and OpenBSD use 'elf_i386'; FreeBSD uses the _fbsd
     # variant; and Windows uses i386pe.
-    for emu in elf_i386 elf_i386_fbsd i386pe; do
+    for emu in elf_i386 elf_i386_fbsd elf_i386_obsd i386pe; do
         if "$ld" -verbose 2>&1 | grep -q "^[[:space:]]*$emu[[:space:]]*$"; then
             ld_i386_emulation="$emu"
             roms="optionrom"
