$OpenBSD: patch-go_kbfs_libkbfs_folder_branch_ops_go,v 1.1 2019/07/12 17:54:38 juanfra Exp $

Fix a bug when pushing big repos on slow connections.

https://github.com/keybase/client/commit/a49da292349ba6bc2e6cc02121ea64f3d5714c43

Index: go/kbfs/libkbfs/folder_branch_ops.go
--- go/kbfs/libkbfs/folder_branch_ops.go.orig	Fri Jul 12 18:42:15 2019
+++ go/kbfs/libkbfs/folder_branch_ops.go	Fri Jul 12 18:42:18 2019
@@ -7377,7 +7377,7 @@
 		timedOut = true
 	default:
 	}
-	if timedOut || !mdserver.IsConnected() {
+	if lockBeforeGet == nil && (timedOut || !mdserver.IsConnected()) {
 		fbo.vlog.CLogf(
 			ctx, libkb.VLog1, "Not fetching new updates while offline")
 		return nil
