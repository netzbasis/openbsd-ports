$OpenBSD: patch-nss_lib_freebl_alghmac_h,v 1.2 2019/04/07 18:48:38 sthen Exp $

Prevent symbol conflict with libcrypto.

Index: nss/lib/freebl/alghmac.h
--- nss/lib/freebl/alghmac.h.orig
+++ nss/lib/freebl/alghmac.h
@@ -9,6 +9,13 @@ typedef struct HMACContextStr HMACContext;
 
 SEC_BEGIN_PROTOS
 
+/*
+ * These functions are used inter-library in NSS, so must be exported, but
+ * conflict with functions in openssl libcrypto.
+ */
+#define HMAC_Init NSS_HMAC_Init
+#define HMAC_Update NSS_HMAC_Update
+
 /* destroy HMAC context */
 extern void
 HMAC_Destroy(HMACContext *cx, PRBool freeit);
