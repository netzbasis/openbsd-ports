# $OpenBSD: Makefile,v 1.1.1.1 2019/02/09 22:47:25 sebastia Exp $

PKG_ARCH =	*

COMMENT =	archive of public exploits and shellcode

GH_ACCOUNT =	offensive-security
GH_PROJECT =	exploitdb
GH_TAGNAME =	2019-02-05
DISTNAME =	exploitdb-${GH_TAGNAME}
PKGNAME =	exploitdb-${GH_TAGNAME:S,-,,g}

CATEGORIES =	security

MAINTAINER =	Sebastian Reitenbach <sebastia@openbsd.org>

# GPLv2
PERMIT_PACKAGE_CDROM =	Yes

RUN_DEPENDS +=	shells/bash

NO_BUILD =	Yes
NO_TEST =	Yes

pre-configure:
	${SUBST_CMD} ${WRKSRC}/searchsploit \
		${WRKSRC}/.searchsploit_rc

do-install:
	${INSTALL_DATA_DIR} ${PREFIX}/share
	${INSTALL_PROGRAM_DIR} ${PREFIX}/bin
	cp -R ${WRKSRC} ${PREFIX}/share/exploitdb
	mv ${PREFIX}/share/exploitdb/searchsploit \
		${PREFIX}/bin/searchsploit
	rm ${PREFIX}/share/exploitdb/.*beforesubst \
		${PREFIX}/share/exploitdb/.*orig
	rm ${PREFIX}/share/exploitdb/*beforesubst \
		${PREFIX}/share/exploitdb/*orig

.include <bsd.port.mk>
