$OpenBSD: patch-scandir_py,v 1.1.1.1 2018/08/09 19:08:11 danj Exp $

Merged upstream: https://github.com/benhoyt/scandir/pull/109

Index: scandir.py
--- scandir.py.orig
+++ scandir.py
@@ -422,6 +422,16 @@ elif sys.platform.startswith(('linux', 'darwin', 'suno
                     ('d_type', ctypes.c_byte),
                     ('d_name', ctypes.c_char * 256),
                 )
+            elif 'openbsd' in sys.platform:
+                _fields_ = (
+                    ('d_ino', ctypes.c_uint64),  # must be uint64
+                    ('d_off', ctypes.c_uint64),
+                    ('d_reclen', ctypes.c_uint16),
+                    ('d_type', ctypes.c_uint8),
+                    ('d_namlen', ctypes.c_uint8),
+                    ('__d_padding', ctypes.c_uint8 * 4),
+                    ('d_name', ctypes.c_char * 256),
+                )
             else:
                 _fields_ = (
                     ('d_ino', ctypes.c_uint32),  # must be uint32, not ulong
