$OpenBSD: patch-src_log_cc,v 1.2 2018/04/10 13:25:34 gonzalo Exp $

Index: src/log.cc
--- src/log.cc.orig
+++ src/log.cc
@@ -37,7 +37,7 @@ int CommonLogParser::parse(char *logline, struct logbi
 	if (!bufcp)
 		return -1;
 
-	*bufcp = (char) NULL;
+	*bufcp = '\0';
 	++bufcp;
 
 	/* quickly figure out if this is an IP or a host. We do this by
@@ -176,7 +176,7 @@ int CommonLogParser::parse(char *logline, struct logbi
 	/* find the end of referrer and null it */
 	if (!(bufcp = strchr(bufsp, '"')))
 		return -1;
-	*bufcp = (char) NULL;
+	*bufcp = '\0';
 
 	/* unless they want to keep it, skip over the protocol, ie http:// */
 	if ((cf.preserve_ref_protocol == 0) && (bufcp = strstr(bufsp, "://")))
@@ -234,7 +234,7 @@ char *LogParser::processURL(char **buf) /* {{{ */
 		return NULL;
 
 	/* null the space in front of it */
-	*endptr = (char) NULL;
+	*endptr = '\0';
 
 	/* TODO maybe we can use the protocol someday.. */
 
@@ -262,7 +262,7 @@ int LogParser::mungeURL(char **url, int *length) /* {{
 	char *bufcp, *endptr, *workptr;
 
 	endptr = *url + *length;
-	*endptr = (char) NULL;
+	*endptr = '\0';
 
 	/* do we want to keep the query string? */
 	if (!cf.keep_querystring)
@@ -277,7 +277,7 @@ int LogParser::mungeURL(char **url, int *length) /* {{
 			if (workptr < endptr)
 			{
 				/* we're ok */
-				*workptr = (char) NULL;
+				*workptr = '\0';
 				bufcp = workptr+1;
 			}
 		}
@@ -312,7 +312,7 @@ int LogParser::mungeURL(char **url, int *length) /* {{
 			if (workptr == endptr)
 				bufcp = workptr;
 		}
-		*bufcp = (char) NULL;
+		*bufcp = '\0';
 	}
 
 
