$OpenBSD: patch-lib_facter_processors_os_rb,v 1.2 2014/08/26 19:58:25 jasper Exp $

https://github.com/puppetlabs/facter/pull/771

--- lib/facter/processors/os.rb.orig	Mon Aug 25 22:04:40 2014
+++ lib/facter/processors/os.rb	Tue Aug 26 21:57:15 2014
@@ -177,6 +177,16 @@ module Facter
       def get_physical_processor_count
         Facter::Util::POSIX.sysctl("hw.ncpufound").to_i
       end
+
+      def get_processor_speed
+        speed = Facter::Util::POSIX.sysctl("hw.cpuspeed").to_i
+        if speed < 1000
+          "#{speed} MHz"
+        else
+          speed = speed.to_f / 1000
+          "#{(speed * 100).round.to_f / 100.0} GHz"
+        end
+      end
     end
 
     class SunOS < Base
