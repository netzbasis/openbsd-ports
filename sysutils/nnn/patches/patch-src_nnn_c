$OpenBSD: patch-src_nnn_c,v 1.1 2020/01/24 15:32:23 bket Exp $

Fix displaying wrong capacity. Taken from https://github.com/jarun/nnn/pull/441

Index: src/nnn.c
--- src/nnn.c.orig
+++ src/nnn.c
@@ -3285,7 +3285,7 @@ static size_t get_fs_info(const char *path, bool type)
 		return 0;
 
 	if (type == CAPACITY)
-		return svb.f_blocks << ffs((int)(svb.f_bsize >> 1));
+		return svb.f_blocks << ffs((int)(svb.f_frsize >> 1));
 
 	return svb.f_bavail << ffs((int)(svb.f_frsize >> 1));
 }
