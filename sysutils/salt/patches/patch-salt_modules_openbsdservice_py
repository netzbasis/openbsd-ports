$OpenBSD: patch-salt_modules_openbsdservice_py,v 1.4 2015/01/07 09:57:39 ajacoutot Exp $

https://github.com/saltstack/salt/commit/ea2be8bc7813ba2e2ddd05913783887513516c8c

--- salt/modules/openbsdservice.py.orig	Mon Nov  3 20:38:21 2014
+++ salt/modules/openbsdservice.py	Wed Jan  7 10:33:06 2015
@@ -27,8 +27,10 @@ def __virtual__():
         krel = map(int, __grains__['kernelrelease'].split('.'))
         # The -f flag, used to force a script to run even if disabled,
         # was added after the 5.0 release.
+        # the rcctl(8) command is the prefered way to manage services.
         if krel[0] > 5 or (krel[0] == 5 and krel[1] > 0):
-            return __virtualname__
+            if not os.path.exists('/usr/sbin/rcctl'):
+                return __virtualname__
     return False
 
 
