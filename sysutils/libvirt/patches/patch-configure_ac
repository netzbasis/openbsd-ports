$OpenBSD: patch-configure_ac,v 1.4 2016/01/11 17:47:33 jasper Exp $

From 91b423beb72892d9d680060001244f588ef20691 Mon Sep 17 00:00:00 2001
From: Jasper Lievisse Adriaanse <jasper@openbsd.org>
Date: Fri, 8 Jan 2016 00:31:17 +0300
Subject: [PATCH] Use struct sockpeercred when available

--- configure.ac.orig	Wed Dec  2 16:14:59 2015
+++ configure.ac	Mon Jan 11 18:39:07 2016
@@ -389,6 +389,12 @@ AC_CHECK_TYPE([struct ifreq],
         #include <net/if.h>
   ]])
 
+AC_CHECK_TYPE([struct sockpeercred],
+  [AC_DEFINE([HAVE_STRUCT_SOCKPEERCRED], [1],
+    [Defined if struct sockpeercred is available])],
+  [], [[#include <sys/socket.h>
+  ]])
+
 AC_CHECK_DECLS([ETH_FLAG_TXVLAN, ETH_FLAG_NTUPLE, ETH_FLAG_RXHASH, ETH_FLAG_LRO,
                 ETHTOOL_GGSO, ETHTOOL_GGRO, ETHTOOL_GFLAGS, ETHTOOL_GFEATURES],
   [], [], [[#include <linux/ethtool.h>
