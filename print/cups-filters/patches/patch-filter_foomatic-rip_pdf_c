$OpenBSD: patch-filter_foomatic-rip_pdf_c,v 1.2 2020/03/15 10:54:33 ajacoutot Exp $

From 84d0b48a4f20a770e5daff3c19f33ea1a02b66c3 Mon Sep 17 00:00:00 2001
From: Till Kamppeter <till.kamppeter@gmail.com>
Date: Tue, 10 Mar 2020 17:04:55 +0100
Subject: [PATCH] foomatic-rip: Do PDF page count in -dNOSAFER mode

Index: filter/foomatic-rip/pdf.c
--- filter/foomatic-rip/pdf.c.orig
+++ filter/foomatic-rip/pdf.c
@@ -47,7 +47,7 @@ int pdf_count_pages(const char *filename)
     size_t bytes;
     char *p;
 
-    snprintf(gscommand, CMDLINE_MAX, "%s -dNODISPLAY -dSAFER -dNOPAUSE -q -c "
+    snprintf(gscommand, CMDLINE_MAX, "%s -dNODISPLAY -dNOSAFER -dNOPAUSE -q -c "
 	     "'/pdffile (%s) (r) file runpdfbegin (PageCount: ) print "
 	     "pdfpagecount = quit'",
 	     gspath, filename);
