# $OpenBSD: Makefile,v 1.5 2014/07/10 11:06:37 rpe Exp $

COMMENT =	PDF creation library

VERSION =	2_3_0
GH_ACCOUNT =	libharu
GH_PROJECT =	libharu
GH_TAGNAME =	RELEASE_${VERSION}
GH_COMMIT =	4ae1d5f4c84459f130bf1b1ef4c5c330af8eca5d
DISTNAME =	${GH_PROJECT}-${VERSION:S/_/./g}
SHARED_LIBS=	hpdf 0.1 #2.3
CATEGORIES =	print

HOMEPAGE =	http://libharu.org/

# ZLIB/PNG
PERMIT_PACKAGE_CDROM =	Yes

AUTOCONF_VERSION =	2.69
AUTOMAKE_VERSION =	1.14

CONFIGURE_STYLE =	gnu
CONFIGURE_ARGS =	--with-png=${LOCALBASE}

#  for libtoolize
BUILD_DEPENDS =	devel/libtool \
		${MODGNU_AUTOCONF_DEPENDS} \
		${MODGNU_AUTOMAKE_DEPENDS}

LIB_DEPENDS =	graphics/png
WANTLIB =	m png z

WRKDIST =	${WRKDIR}/libharu-RELEASE_${VERSION}

pre-configure:
	cd ${WRKSRC} && ${MAKE_PROGRAM} LIBTOOLIZE=libtoolize \
		AUTOMAKE_VERSION=${AUTOMAKE_VERSION} \
		AUTOCONF_VERSION=${AUTOCONF_VERSION} -f build.mk

.include <bsd.port.mk>
